API Structure

//Receive
{
	"action" : "receive",
	"key" : "key",
	"unread" : 1
}

{
	"action" : "send",
	"message" : "sentmessage", 
	"keyfrom" : "from",
	"keyto" : "to",
	"signature" : "sign(msg)"
}


{
	"action" : "delete" ,
	"key" : "to",
	"message" : "salt",
	"signature" : "sign(msg)"

}

//if the action is `delete`, message must be the string "delete" encrypted by private key to garantee the identity of user.

{
	"action" : "adduser",
	"key" : "publickey",
	"name" : "username",
	"email" : "email",
	"signature" : "sign(msg)",
	"message" : "msg"

}


{
	"action" : "modifyuser",
	"key" : "publickey",
	"name" : "username",
	"email" : "email",
	"signature" : "sign(msg)",
	"message" : "msg"
}


{
	"action" : "queryuser",
	"key" : "key"
}



MSG Structure

{
	"type" : "message",
	"message" : "msg"
}

{
	"type" : "request",
	"action" : "askForP2P"
}

{
	"type" : "request",
	"action" : "accept",
	"ip" : "ip"
}

{
	"type" : "request",
	"action" : "received",
	"ip" : "ip"
}


FRIEND LIST Structure

[
	{
		"name" : "name",
		"alias" : "alias",
		"key" : "key"
	},
	{
		"name" : "name2",
		"alias" : "alias2",
		"key" : "key2"
	}
]